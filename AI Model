import pandas as pd
from sklearn.model_selection import train_test_split
from sklearn.tree import DecisionTreeClassifier
from sklearn.metrics import accuracy_score

# Load the dataset from the CSV file
df = pd.read_csv('iris.csv')

# Ensure the dataframe has column names
df.columns = df.columns.str.strip()  # Strip any accidental spaces from column names

# Split into features and target
X = df.iloc[:, :-1]  # All columns except the last one (features)
y = df.iloc[:, -1]   # Last column (species)

# Split into training and testing sets (80% train, 20% test)
X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=42)

# Create and train the decision tree model
model = DecisionTreeClassifier()
model.fit(X_train, y_train)

# Make predictions and evaluate the model
y_pred = model.predict(X_test)
accuracy = accuracy_score(y_test, y_pred)
print(f"Model Accuracy: {accuracy:.2f}")

# Function to get user input and predict the class
def get_prediction():
    print("Enter the following details about the flower:")
    sepal_length = float(input("Sepal Length (cm): "))
    sepal_width = float(input("Sepal Width (cm): "))
    petal_length = float(input("Petal Length (cm): "))
    petal_width = float(input("Petal Width (cm): "))
    
    # Create the sample with user input
    sample = pd.DataFrame([[sepal_length, sepal_width, petal_length, petal_width]], columns=X.columns)
    
    # Predict the class
    predicted_class = model.predict(sample)[0]
    print(f"Predicted class for the entered flower: {predicted_class}")

# Call the function to get prediction from the user
get_prediction()
